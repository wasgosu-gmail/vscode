##
# This Oracle HTTP Server configuration file contains directives
# required for communication between Node Manager and Oracle HTTP
# Server.  The port number and local address can be customized,
# but other changes are not recommended and may result in an
# inability to manage the lifecycle of the Oracle HTTP Server
# instance.
#
# If the port number or local address need to be customized, ensure
# that both the Listen and the VirtualHost directives are updated.
#

LoadModule dms_module "${PRODUCT_HOME}/modules/mod_dms.so"
LoadModule ossl_module "${PRODUCT_HOME}/modules/mod_ossl.so"

#[Listen] OHS_PROXY_PORT
Listen 127.0.0.1:7779
#[VirtualHost] OHS_PROXY_VH
<VirtualHost 127.0.0.1:7779>
 <IfModule ossl_module>
  #  SSL Engine Switch:
  #  Enable/Disable SSL for this virtual host.
  SSLEngine on
  
  ServerName localhost
  
  # Client Authentication (Type):
  # Client certificate verification type and depth.  Types are
  # none, optional and require.
  SSLVerifyClient none
  
  #  SSL Protocol Support:
  #  Configure usable SSL/TLS protocol versions.
  SSLProtocol TLSv1.2
  
  # Option to prefer the server's cipher preference order
  SSLHonorCipherOrder on
  
  #  SSL Cipher Suite:
  #  List the ciphers that the client is permitted to negotiate.
  SSLCipherSuite TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA,TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,TLS_RSA_WITH_AES_128_GCM_SHA256,TLS_RSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_128_CBC_SHA256,TLS_RSA_WITH_AES_256_CBC_SHA256,SSL_RSA_WITH_AES_128_CBC_SHA,SSL_RSA_WITH_AES_256_CBC_SHA
  
  #Path to the wallet
  SSLWallet  "${ORACLE_INSTANCE}/config/fmwconfig/components/${COMPONENT_TYPE}/instances/${COMPONENT_NAME}/keystores/default"
  
  <Location /dms/>
   SetHandler dms-handler
   Require all granted
  </Location>
  
  CustomLog "||${PRODUCT_HOME}/bin/odl_rotatelogs ${ORACLE_INSTANCE}/servers/${COMPONENT_NAME}/logs/admin_log 43200" common
 </IfModule>
</VirtualHost>

